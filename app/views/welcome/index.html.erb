<script type="text/javascript">
	$( document ).ready (function() {

		$("#structure_standard").click(function (){
			$ ("#search").prop("placeholder", "willitbeard");
			$("#tumblr-addon").show();
			
		});

		$("#structure_custom").click(function (){
			$ ("#search").prop("placeholder", "haiku.nytimes.com");
			$("#tumblr-addon").toggle("hidden");
		});


		//Makes sure textbox type is set properly depending on last search
		if ($("#structure_standard").prop("checked")){
			$("#structure_standard").click();
		}
		else{
			$("#structure_custom").click();
		}

	  $('[data-toggle="popover"]').popover()

	  
	});
</script>


	<div class="page-header"><h2 class="center">Find your most popular Tumblr posts</br><small>Enter either the name or URL of a Tumblr blog to retrieve its top posts</small></h2></div>

	<%= form_tag("/", method: "get") do %>
	<div class="form-group">
		<div class="input-group">
		
			<div class="input-group-addon">http://</div>
		  <%= text_field_tag(:search, nil, :placeholder => "e.g. willitbeard", class: "form-control")%>
		  
			<div id="tumblr-addon" class="input-group-addon">.tumblr.com</div>
		
		</div>
	  </div>

	  <div class= "form-group">

	  <%= label_tag(:standard, "Name", class: "radio-inline") %>
	  <%= radio_button_tag(:structure, "standard", true) %>

	  	<%= label_tag(:custom, "URL", class: "radio-inline") %><a tabindex="0" role="button" data-toggle="popover" data-content="Use this for blogs that don't end with .tumblr.com" data-trigger="hover focus" data-placement="bottom"><span class="glyphicon glyphicon-question-sign" aria-hidden="true" ></span></a>
	  	<%= radio_button_tag(:structure, "custom", @uri_structure == "custom") %>
	
		<%= label_tag(:reblogs, "Reblogs?", class: "checkbox-inline") %>
	  <%= check_box_tag(:reblogs, 1, @show_reblogs) %>
		</div>
	   <%= button_tag(type: 'submit', class: "btn btn-lg btn-primary col-xs-12") do %>
 			<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
		<% end %>
	 	<% end %>
	
		<table class="table center">
			<tr>
				<th class="col-xs-1">Rank</th>
				<th class="col-xs-1">Notes</th>
				<th class="col-xs-9">Image</th>
				<th class="col-xs-1">Date</th>
			</tr>
			<% @finalArray.each_with_index do |post, index|%>
				<tr>
					<td><%= index + 1 %></td>
					<td><%= post["note_count"] %></td>
					  <td>
					  	
						  <a href='<%= post["short_url"] %>' target="_blank" class="thumbnail">
						   <img src="<%= post["photos"][0]["alt_sizes"][2]["url"] %>">
						  </a>
						  
					  </td>
					 <td><%= Time.at(post["timestamp"]).strftime('%m/%d/%Y') %></td>
				</tr>
			<% end %>
		</table>

